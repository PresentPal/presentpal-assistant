<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>PresentPal</title>
    
    <!-- Favicon (Displayed in Browser Tab) -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon.png">

    <!-- Apple Touch Icon for iPhone Home Screen -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

    <!-- Google Font for a more interesting typography -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Roboto+Slab:wght@400&display=swap" rel="stylesheet">

    <link rel="manifest" href="/manifest.json">

    <style>
      /* General Styles */
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Roboto Slab', serif;
        height: 100%;
        background-color: #ffffff; /* Prevents blank white screen */
      }

      /* Header Styling */
      header {
        width: 100%;
        height: 30vh;
        background-image: url('GiftAssistant.png'); /* Background image */
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        color: #e3bb58;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 30px 20px;
        box-sizing: border-box;
      }

      /* Header Text Styling */
      .header-title {
        font-family: 'Poppins', sans-serif;
        font-size: 3.9em;
        font-weight: bold;
        letter-spacing: 1px;
        margin: 10px 0;
      }

      .header-title .present {
        color: white;
      }

      .header-title span {
        color: #e3bb58;
      }

      .header-subtitle {
        font-family: 'Roboto Slab', serif;
        font-size: 1.3em;
        margin: 10px 0;
      }

      /* Mobile Adjustments */
      @media (max-width: 768px) {
        .header-title {
          font-size: 1.5em;
        }

        .header-title .present {
          font-size: 1.5em;
        }

        .header-title span {
          font-size: 1.5em;
        }

        .header-subtitle {
          font-size: 1em;
        }

        header {
          padding: 40px 20px;
        }
      }

      /* Landbot Chat Container Fix */
      #myLandbot {
        width: 100%;
        height: calc(100vh - 30vh - env(safe-area-inset-bottom, 0px));
        min-height: 500px;
        overflow-y: auto;
        box-sizing: border-box;
        background-color: #f9f9f9;
      }

      /* Add to Home Screen Button Styles */
      #add-to-home-screen-button {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #ffd800;
        color: white;
        padding: 10px 20px;
        font-size: 16px;
        border-radius: 5px;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        display: none; /* Initially hidden */
      }

      #add-to-home-screen-button p {
        color: #333;
        font-size: 14px;
        margin: 5px 0;
      }

      #add-to-home-screen-button button {
        background-color: #ffd800;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        border-radius: 5px;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <!-- Start of Custom Header -->
    <header>
      <h1 class="header-title"><span class="present">Present</span><span>Pal</span></h1>
      <p class="header-subtitle">Get personalised gift ideas for your friends and family.</p>
    </header>
    <!-- End of Custom Header -->

    <!-- Start of Add to Home Screen Button -->
    <div id="add-to-home-screen-button">
      <button id="add-button" onclick="addToHomeScreen()">Add to Home Screen</button>
      <p id="ios-instructions" style="display: none;">For iOS: Tap the Share icon at the bottom of your screen, then select 'Add to Home Screen'.</p>
    </div>
    <!-- End of Add to Home Screen Button -->

    <!-- Start of Landbot chat embed (Unchanged) -->
    <script SameSite="None; Secure" type="module" src="https://cdn.landbot.io/landbot-3/landbot-3.0.0.mjs"></script>
    <div id="myLandbot"></div>
    <script type="module">
      var myLandbot = new Landbot.Container({
        container: '#myLandbot',
        configUrl: 'https://storage.googleapis.com/landbot.online/v3/H-2769762-VQ3B8OLEKLOSPJSC/index.json',
      });
    </script>
    <!-- End of Landbot chat embed -->

    <script>
      // Check if the website is running in standalone mode (PWA)
      if (window.matchMedia('(display-mode: standalone)').matches) {
        // Hide the 'Add to Home Screen' button when in standalone mode
        document.getElementById('add-to-home-screen-button').style.display = 'none';
      } else {
        // Show the 'Add to Home Screen' button when in the browser
        document.getElementById('add-to-home-screen-button').style.display = 'block';

        // Detect if the device is Android or iOS to display the correct information
        const isAndroid = /android/i.test(navigator.userAgent);
        const isIOS = /iphone|ipod|ipad/i.test(navigator.userAgent);

        if (isAndroid) {
          // Android users will see the button that triggers the "Add to Home Screen"
          document.getElementById('add-button').style.display = 'block';
        } else if (isIOS) {
          // iOS users will see the instructions
          document.getElementById('ios-instructions').style.display = 'block';
        }
      }

      // Function to trigger the 'Add to Home Screen' prompt for Android users
      function addToHomeScreen() {
        alert('You can now add this site to your Home Screen!');
        // This is just an alert for Android users. You can trigger browser-specific instructions here if needed.
      }
    </script>
  </body>
</html>
